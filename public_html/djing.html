<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Djing</title>
    <!--[if lt IE 9]><meta http-equiv="refresh" content="0;URL=bad_ie.html" /><![endif]-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="css/fontello/fontello-embedded.css">
    <link type="text/css" rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class="container h500 djing">
        <menu id="main_top_menu">
            <a href="#" class="menu_item">
                <i class="icon-home"></i>&nbsp;Главная
            </a>
            <a href="djing_doc/index.html" class="menu_item">
                <i class="icon-yandex-rect"></i>&nbsp;Проект Djing
            </a>
            <a href="#" class="menu_item">
                <i class="icon-wrench"></i>&nbsp;Menu 2
            </a>
            <a href="#" class="menu_item">
                <i class="icon-cog"></i>&nbsp;Контакты
            </a>
        </menu>
        <article id="main_article" class="justify_center">
            <div>
                <h1>Проект Djing</h1>
                <p>Простая биллинговая система для интернет провайдера. На текущий момент поддерживает
                   управление множественными серверами доступа Mikrotik. Есть платёжная система по протоколу
                   от CityPay. Система тикетов не даст задачам которые нужно выполнить затеряться
                   в рабочей суете, при этом всю возможную информацию, которая уже есть в базе не нужно будет
                   указываеть снова, диспетчеру достаточно нажать на учётную запись позвонившего, и биллинг сам
                   назначит её тем сотрудникам, которые ответственны за район в котором проживает абонент.
                   А управление оборудованием позволит лишний раз не напрягать вашего админа чтоб посмотреть состояние
                   портов оборудования, и он мог заниматься автоматизацией. И ещё многое другое под катом :)</p>
            </div>
        </article>
        <a href="https://github.com/nerosketch/djing" id="contact_me" target="_blank" class="btn_grad">
            <i class="icon-github"></i> Djing на Github
        </a>
    </header>
    <main class="container">
        <section>
            <h2 class="section_title">
                Оглавление
            </h2>
            <div class="container-inline justify_left">
                <ol>
                    <li><a href="#">Установка</a></li>
                </ol>
            </div>
        </section>
        <section>
            <h2>Установка Djing</h2>
            <div class="container-inline justify_left">
                <p>
                    Работа предполагается на python3.
                    Я предпочитаю запускать wsgi сервер на связке uWSGI + Nginx, так что ставить будем соответствующие пакеты.
                    <b>На Fedora25 нужные пакеты можно установить так:</b>
                    Для начала подготовим систему, очистим и обновим пакеты. Процесс обновления долгий, так что можно пойти заварить себе чай :)
                    <code lang="bash">
                        # dnf clean all
                        # dnf -y update
                    </code>
                    Затем установим зависимости
                    <code lang="bash">
                        # dnf -y install python3 python3-devel python3-pip python3-pillow mariadb mariadb-devel uwsgi nginx uwsgi-plugin-python3 net-snmp net-snmp-libs net-snmp-utils net-snmp-devel net-snmp-python git redhat-rpm-config curl-devel expect
                    </code>
                    Необходимо чтоб версия python по умолчанию была третья:
                    <code lang="bash">
                        # ln -sf python3 /usr/bin/python
                    </code>
                    Условимся что путь к папке с проектом находится по адресу: /var/www/djing. Дальше создадим каталок для web, затем обновляем pip и ставим проект через pip:
                    <code lang="bash">
                        # mkdir /var/www
                        # cd /var/www
                        # pip3 install --upgrade pip
                        # git clone https://github.com/nerosketch/djing.git
                        # export PYCURL_SSL_LIBRARY=openssl
                        # pip3 install -r djing/requirements.txt
                    </code>
                    Скопируем конфиги из примеров в реальные:
                    <code lang="bash">
                    $ cd /var/www/djing
                    $ cp djing/settings_example.py djing/settings.py
                    </code>
                    Затем отредактируйте конфиги для своих нужд.
                    Для удобства я создаю пользователя и группу http:http, и всё что связано с web-сервером запускаю от имени http.
                    <code lang="bash">
                        # groupadd -r http
                        # useradd -l -M -r -d /dev/null -g http -s /sbin/nologin http
                        # chown -R http:http /var/www
                        # chown -R http:http /etc/nginx
                        # chown -R http:http /etc/uwsgi.*
                        # chown -R http:http /run/uwsgi/
                    </code>
                </p>
                <h2>Настройка WEB Сервера</h2>
                <p>
                    Конфиг Nginx на моём рабочем сервере выглядит так:
                    <code lang="nginx">
                        user http;
worker_processes auto;
pid /run/nginx.pid;

events {
    worker_connections 1024;
}

http {
    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

    upstream djing { server unix:///run/uwsgi/djing.sock; }

    server {
        listen 80;
        server_name   &blacktriangleleft;ваш-домен&blacktriangleright;;
        root         /var/www/djing;
        charset      utf-8;

        # укажите где лежит ваш раздел с медиа для сайта
        location /media  {
            alias /var/www/djing/media;
        }

        # местоположение статики
        location /static {
            alias /var/www/djing/static;
        }

        # тут надо указать путь куда у вас установился Django + путь к статике админки
        # путь к Django тут: /usr/lib/python3.5/site-packages/django
        # путь к статике соответственно: contrib/admin/static/admin
        location /static/admin {
            alias /usr/lib/python3.5/site-packages/django/contrib/admin/static/admin;
        }

        # на корневом url / реагируем с помощью сокета проекта
        # у нас он называется "djing": upstream djing { server ...
        location / {
            uwsgi_pass djing;
            include uwsgi_params;
        }
    }
}
                    </code>
                </p>
            </div>
        </section>
    </main>
    <footer class="container">
        <div class="row container-inline justify_space">
            <div class="col">
                <b>Контакты</b>
                <dl>
                    <dt>Телефон</dt>
                    <dd><a href="tel:+79788328884">+79788328884</a></dd>
                    <dt>Почта</dt>
                    <dd><a href="mailto:leming.1993@mail.ru">leming.1993@mail.ru</a></dd>
                    <dt>Telegram</dt>
                    <dd><a href="https://t.me/nerosketch">nerosketch</a></dd>
                    <dt>Skype</dt>
                    <dd>bashmachnk</dd>
                </dl>
            </div>
            <div class="col">
                <b>Программы и технологии</b>
                <p>Backend, Server: Linux, Python/Django, Mariadb(MySQL),
                    MongoDB, Redis, Asterisk(SIP, Dongle, IAX), Nagios,
                    Nginx, UWSGI. Frontend: Bootstrap, JQuery, Angular5,
                    HTML5, CSS3. Other: Photoshop, git, php, C, Go, bash, PyCharm.</p>
            </div>
        </div>
        <div class="row container bottom">
            <small>&copy; Дмитрий Новиков 2019.</small>
            <small>Ресурс не ведёт предпринимательской деятельности</small>
        </div>
    </footer>

    <script type="text/javascript" src="js/my.js"></script>
</body>
</html>